# ChessGameApi

**ChessGameApi** — это серверное приложение на .NET для онлайн-шахмат, реализующее REST API и SignalR для взаимодействия игроков в реальном времени.

## Возможности

- Создание и управление шахматными партиями
- Поддержка двух игроков и очереди на игру
- Проверка легальности ходов и состояния доски
- Поддержка всех стандартных шахматных фигур и правил
- Веб-сокеты (SignalR) для обновления состояния игры в реальном времени
- Модульные тесты для проверки логики игры

## Иерархия классов шахмат

- **ChessPiece** (абстрактный класс)
  - Общие свойства: цвет (`ChessColors`), имя (`ChessPieceNames`), методы для получения возможных ходов
  - **Наследники:**
    - `King`
    - `Queen`
    - `Rook`
    - `Bishop`
    - `Knight`
    - `Pawn`
- **ChessBoard**
  - Представляет шахматную доску как двумерный массив клеток (`BoardCell`)
  - Методы для размещения, перемещения и получения фигур
- **BoardCell**
  - Содержит информацию о фигуре, находящейся в клетке, и её координатах
- **Player**
  - Информация об игроке: id, имя, цвет
- **GameState**
  - Хранит текущее состояние партии: доска, игроки, чей ход, история ходов

## Проверка легальности хода

1. **Получение возможных ходов**
   - Для выбранной фигуры вызывается метод получения возможных ходов с учётом типа фигуры и текущей позиции.
2. **Проверка правил шахмат**
   - Учитываются базовые правила: направление движения, возможность взятия, специальные правила (рокировка, взятие на проходе, превращение пешки).
3. **Проверка на шах**
   - После гипотетического выполнения хода проверяется, не остаётся ли король под шахом.
4. **Финальная валидация**
   - Если ход не нарушает ни одно из правил и не приводит к шаху своему королю, то он считается легальным.

## Быстрый старт

1. Склонируйте репозиторий
2. Соберите и запустите проект:
   ```
   dotnet build ChessGameApi.sln
   dotnet run --project ChessGame.Main/ChessGameApi.csproj
   ```
3. Для запуска тестов:
   ```
   dotnet test ChessGameApi.sln
   ```
